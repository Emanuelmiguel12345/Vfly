<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo do Jaiminho - Pro Streamer Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Montserrat:wght@800&family=Rajdhani:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #09090b;
            --bg-panel: rgba(20, 20, 30, 0.6);
            --primary: #00f2ff; /* Cyan Neon */
            --primary-glow: rgba(0, 242, 255, 0.6);
            --secondary: #ff0055; /* Hot Pink */
            --secondary-glow: rgba(255, 0, 85, 0.6);
            --accent: #7000ff; /* Purple */
            --text-main: #ffffff;
            --text-dim: #a1a1aa;
            --success: #00ff9d;
            --font-main: 'Poppins', sans-serif;
            --font-display: 'Montserrat', sans-serif;
            --font-tech: 'Rajdhani', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(112, 0, 255, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 242, 255, 0.1) 0%, transparent 40%),
                linear-gradient(180deg, #09090b 0%, #1a1a2e 100%);
            background-attachment: fixed;
            color: var(--text-main);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Scrollbar Personalizada */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.3); border-radius: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #fff; }

        /* --- Header & Logo --- */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 20px;
        }

        .logo {
            width: 120px;
            height: 120px;
            object-fit: contain;
            filter: drop-shadow(0 0 20px var(--primary-glow));
            animation: float 4s ease-in-out infinite;
        }

        h1 {
            font-family: var(--font-display);
            font-size: 3.5rem;
            text-transform: uppercase;
            background: linear-gradient(135deg, #fff 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-top: 10px;
            letter-spacing: -1px;
            position: relative;
            display: inline-block;
            text-shadow: 0 10px 30px rgba(0, 242, 255, 0.3);
        }

        h1::after {
            content: 'LIVE EDITION';
            position: absolute;
            bottom: -15px;
            right: 0;
            font-family: var(--font-tech);
            font-size: 1rem;
            color: var(--secondary);
            letter-spacing: 4px;
            text-shadow: 0 0 10px var(--secondary-glow);
        }

        /* --- Layout Grids --- */
        .main-container {
            display: grid;
            grid-template-columns: 280px 1fr 280px;
            gap: 25px;
            max-width: 1600px;
            width: 100%;
            margin: 0 auto;
            align-items: start;
        }

        /* --- Cards & Panels (Glassmorphism) --- */
        .glass-panel {
            background: var(--bg-panel);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            padding: 25px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .side-container:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.15);
        }

        h3 {
            font-family: var(--font-tech);
            font-size: 1.5rem;
            text-transform: uppercase;
            color: var(--primary);
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.05);
            padding-bottom: 10px;
            letter-spacing: 1px;
        }

        /* --- Game Area --- */
        .game-container {
            min-height: 600px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 1px solid rgba(0, 242, 255, 0.2);
        }

        /* Inputs Modernos */
        .input-group { margin-bottom: 25px; width: 100%; text-align: left; }
        .input-label { 
            color: var(--text-dim); 
            font-size: 0.9rem; 
            margin-bottom: 8px; 
            display: block; 
            font-weight: 500;
        }
        
        .form-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            color: #fff;
            font-family: var(--font-main);
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.15);
            background: rgba(0, 0, 0, 0.5);
        }

        /* Bot√µes Gamer */
        .btn {
            background: linear-gradient(90deg, var(--secondary) 0%, #d60045 100%);
            color: white;
            border: none;
            padding: 16px 40px;
            border-radius: 12px;
            font-family: var(--font-display);
            font-weight: 800;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
            box-shadow: 0 10px 20px rgba(255, 0, 85, 0.25);
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 15px 30px rgba(255, 0, 85, 0.4);
        }

        .btn:active { transform: translateY(1px); }

        .btn-small {
            padding: 10px 20px;
            font-size: 0.9rem;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }
        .btn-small:hover { background: rgba(255,255,255,0.2); }
        .btn-small.primary { background: var(--primary); color: #000; border: none; }

        /* --- Game Screen Elements --- */
        .theme-display {
            font-family: var(--font-tech);
            color: var(--primary);
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: rgba(0, 242, 255, 0.1);
            padding: 8px 24px;
            border-radius: 100px;
            border: 1px solid rgba(0, 242, 255, 0.3);
            margin-bottom: 20px;
        }

        .word-display {
            font-family: 'Courier New', monospace;
            font-size: 3rem;
            font-weight: 900;
            letter-spacing: 8px;
            color: #fff;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
            margin: 30px 0;
            min-height: 70px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        /* Stats Dashboard */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            width: 100%;
            margin-bottom: 30px;
        }

        .stat-item {
            background: rgba(0,0,0,0.4);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .stat-label { font-size: 0.8rem; color: var(--text-dim); text-transform: uppercase; margin-bottom: 5px; }
        .stat-value { font-family: var(--font-tech); font-size: 1.8rem; font-weight: 700; color: #fff; }
        .stat-value.errors { color: var(--secondary); text-shadow: 0 0 10px var(--secondary-glow); }

        /* Hangman Drawing - Neon Style */
        .hangman-display {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 20px auto;
        }
        
        .hangman-svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        .gallows {
            stroke: rgba(255,255,255,0.2);
            stroke-width: 4;
            stroke-linecap: round;
        }

        .hangman-part {
            stroke: var(--secondary);
            stroke-width: 4;
            stroke-linecap: round;
            fill: none;
            filter: drop-shadow(0 0 8px var(--secondary));
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: drawPart 1s ease forwards;
        }

        @keyframes drawPart { to { stroke-dashoffset: 0; } }

        /* --- Keyboard --- */
        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            max-width: 700px;
            margin-top: auto;
        }

        .keyboard-row { display: flex; justify-content: center; gap: 6px; }

        .key {
            background: rgba(30, 30, 45, 1);
            border: 1px solid rgba(255,255,255,0.1);
            border-bottom: 4px solid rgba(0,0,0,0.5); /* Efeito 3D */
            color: #fff;
            min-width: 45px;
            height: 55px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.1s;
            user-select: none;
            font-family: var(--font-tech);
            font-size: 1.2rem;
        }

        .key:active { transform: translateY(3px); border-bottom-width: 1px; }

        .key:hover:not(.disabled) {
            background: rgba(255,255,255,0.1);
            border-color: var(--primary);
            box-shadow: 0 0 15px var(--primary-glow);
        }

        .key.correct {
            background: var(--success);
            color: #000;
            border-color: var(--success);
            box-shadow: 0 0 20px rgba(0, 255, 157, 0.4);
        }

        .key.wrong {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.2);
            border-color: transparent;
            border-bottom: 1px solid transparent;
            transform: translateY(3px);
        }

        /* --- Modals --- */
        .overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: 0.4s;
        }
        .overlay.active { opacity: 1; pointer-events: all; }

        .modal {
            background: #13131f;
            border: 1px solid rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 24px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            transform: scale(0.9);
            transition: 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .overlay.active .modal { transform: scale(1); }

        .modal.victory-modal { border: 2px solid var(--success); box-shadow: 0 0 50px rgba(0,255,157,0.2); }
        .modal.defeat-modal { border: 2px solid var(--secondary); box-shadow: 0 0 50px rgba(255,0,85,0.2); }
        
        /* Rodrigo Easter Egg Style */
        .rodrigo-modal { border: 2px solid var(--accent); }
        .rodrigo-avatar {
            width: 140px; height: 140px;
            border-radius: 50%;
            border: 4px solid var(--accent);
            box-shadow: 0 0 30px rgba(112, 0, 255, 0.6);
            margin-bottom: 20px;
        }

        /* --- Sidebars --- */
        .scoreboard-container { max-height: 80vh; overflow: hidden; display: flex; flex-direction: column; }
        .scoreboard { flex: 1; overflow-y: auto; padding-right: 5px; }
        
        .score-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px; margin-bottom: 8px;
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
            border-left: 3px solid transparent;
            transition: 0.2s;
        }
        .score-item:hover { background: rgba(255,255,255,0.08); }
        .score-item.streamer { border-left-color: var(--secondary); background: linear-gradient(90deg, rgba(255,0,85,0.1), transparent); }
        .player-score { color: var(--primary); font-family: var(--font-tech); font-weight: bold; }

        .how-to-use { background: rgba(0, 242, 255, 0.05); border-left: 3px solid var(--primary); padding: 15px; border-radius: 8px; font-size: 0.85rem; margin-top: 20px; }
        .how-to-use h4 { color: var(--primary); margin-bottom: 10px; display: flex; align-items: center; gap: 5px; }
        .how-to-use li { margin-bottom: 5px; color: var(--text-dim); }

        /* --- Utilities --- */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.5s forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-container { grid-template-columns: 1fr; }
            .side-container { width: 100%; order: 2; }
            .game-container { order: 1; margin-bottom: 20px; }
            .header h1 { font-size: 2.5rem; }
        }

        @media (max-width: 600px) {
            .word-display { font-size: 2rem; letter-spacing: 4px; }
            .key { min-width: 30px; height: 45px; font-size: 1rem; }
            .header { margin-bottom: 20px; }
        }
    </style>
</head>
<body>

    <div class="overlay" id="victoryOverlay">
        <div class="modal victory-modal">
            <div style="font-size: 4rem; margin-bottom: 10px;">üèÜ</div>
            <h2 style="color: var(--success); font-family: var(--font-display); margin-bottom: 10px;">GG WP!</h2>
            <p id="victoryMessage" style="color: #fff; font-size: 1.2rem;">Voc√™ acertou!</p>
            <div style="margin-top: 25px;">
                <button class="btn" id="continueBtn" style="background: var(--success); color: #000;">Continuar</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="defeatOverlay">
        <div class="modal defeat-modal">
            <div style="font-size: 4rem; margin-bottom: 10px;">üíÄ</div>
            <h2 style="color: var(--secondary); font-family: var(--font-display); margin-bottom: 10px;">GAME OVER</h2>
            <p id="defeatMessage" style="color: #fff; font-size: 1.2rem;">N√£o foi dessa vez...</p>
            <div style="margin-top: 25px;">
                <button class="btn" id="continueDefeatBtn">Continuar</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="rodrigoOverlay">
        <div class="modal rodrigo-modal">
            <img src="https://raw.githubusercontent.com/Emanuelmiguel12345/Vfly/refs/heads/main/oho_rogimsedrg-e.jpeg" alt="Rodrigo Gomes" class="rodrigo-avatar">
            <h2 style="color: var(--accent); margin-bottom: 10px;">@Rodrigo_Gomesh</h2>
            <div style="display: flex; justify-content: center; gap: 10px; margin: 15px 0; font-family: var(--font-tech);">
                <span style="background: rgba(112,0,255,0.2); padding: 5px 10px; border-radius: 5px;">üë• 3173 Segs</span>
                <span style="background: rgba(112,0,255,0.2); padding: 5px 10px; border-radius: 5px;">üéÆ 290 Lives</span>
            </div>
            <p style="font-style: italic; color: #bbb;">"Tenha uma boa live e Deus te aben√ßoe! Siga ele tamb√©m!"</p>
            <div style="margin-top: 25px;">
                <button class="btn" id="closeRodrigoBtn" style="background: var(--accent);">Valeu!</button>
            </div>
        </div>
    </div>

    <div class="welcome-screen fade-in" id="welcomeScreen">
        <div class="header">
            <img src="https://raw.githubusercontent.com/Emanuelmiguel12345/Freecut/refs/heads/main/6%20Sem%20T%C3%ADtulo_20250714021933.png" alt="Logo" class="logo">
            <h1>Jogo do Jaiminho</h1>
            <p style="color: var(--text-dim); margin-top: 10px; font-size: 1.2rem;">A ferramenta definitiva para engajamento em lives</p>
        </div>
        <div class="glass-panel" style="max-width: 500px; margin: 0 auto; text-align: center;">
            <div class="input-group">
                <label for="streamerNameInput" class="input-label">NOME DO STREAMER</label>
                <input type="text" class="form-input" id="streamerNameInput" placeholder="Ex: JaiminhoGamer" maxlength="20">
            </div>
            <button class="btn" id="startGameBtn">INICIAR SISTEMA</button>
        </div>
    </div>

    <div class="main-container hidden" id="mainContainer">
        
        <div class="side-container glass-panel history-container">
            <h3>üìú Patch Notes</h3>
            <div style="height: 300px; overflow-y: auto; font-size: 0.9rem; line-height: 1.6;">
                <div style="margin-bottom: 15px;">
                    <strong style="color: var(--success);">v2.3 (PRO UPDATE)</strong><br>
                    <span style="color: var(--text-dim);">‚Ä¢ Novo Design "Cyber-Glass"<br>‚Ä¢ Anima√ß√µes de UI melhoradas<br>‚Ä¢ Sistema de Feedback Sonoro<br>‚Ä¢ Otimiza√ß√£o para Mobile</span>
                </div>
                <div style="margin-bottom: 15px; opacity: 0.7;">
                    <strong style="color: var(--primary);">v2.1</strong><br>
                    <span>‚Ä¢ Mensagem "Salve o Jaiminho"<br>‚Ä¢ Fundo do Hangman ampliado</span>
                </div>
            </div>
            
            <div class="how-to-use">
                <h4>üéÆ COMANDOS</h4>
                <ol style="padding-left: 15px;">
                    <li>Configure Tema e Palavra Secreta</li>
                    <li>Chat tenta adivinhar letra por letra</li>
                    <li>6 Erros = Ponto para o Streamer</li>
                    <li>Acerto = Ponto para o Viewer</li>
                </ol>
            </div>
        </div>

        <div class="game-container glass-panel" id="gameContainer">
            
            <div class="setup-screen" id="setupScreen" style="width: 100%; max-width: 400px; padding: 20px;">
                <h2 style="text-align: center; margin-bottom: 30px; font-family: var(--font-display);">NOVA RODADA</h2>
                <div class="input-group">
                    <label class="input-label">TEMA DA RODADA</label>
                    <input type="text" class="form-input" id="themeInput" placeholder="Ex: Jogos Retr√¥" maxlength="30">
                </div>
                <div class="input-group">
                    <label class="input-label">PALAVRA SECRETA</label>
                    <input type="password" class="form-input" id="secretWordInput" placeholder="Digite a palavra..." maxlength="30">
                    <small style="color: var(--text-dim); display: block; margin-top: 5px;">Use "_" para espa√ßos</small>
                </div>
                <button class="btn" id="startRoundBtn">COME√áAR JOGO</button>
            </div>

            <div class="game-screen hidden" id="gameScreen" style="width: 100%;">
                <div style="text-align: center;">
                    <div id="themeDisplay" class="theme-display"></div>
                    <div style="color: var(--secondary); font-family: var(--font-display); animation: pulse 2s infinite;">AJUDE A SALVAR O JAIMINHO!</div>
                </div>

                <div class="word-display" id="wordDisplay"></div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">Acertos</div>
                        <div class="stat-value" id="correctCount" style="color: var(--success);">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Vidas</div>
                        <div class="stat-value errors" id="errorCount">0/6</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Letras</div>
                        <div class="stat-value" id="remainingCount" style="color: var(--primary);">0</div>
                    </div>
                </div>

                <div class="hangman-display" id="hangmanDisplay">
                    <img src="https://raw.githubusercontent.com/Emanuelmiguel12345/Freecut/refs/heads/main/6%20Sem%20T%C3%ADtulo_20250714021933.png" 
                         style="position: absolute; width: 60%; height: 60%; top: 20%; left: 20%; opacity: 0.1; object-fit: contain;">
                    
                    <svg class="hangman-svg" viewBox="0 0 200 200">
                        <line class="gallows" x1="20" y1="180" x2="100" y2="180" />
                        <line class="gallows" x1="60" y1="180" x2="60" y2="20" />
                        <line class="gallows" x1="60" y1="20" x2="140" y2="20" />
                        <line class="gallows" x1="140" y1="20" x2="140" y2="40" />
                        
                        <circle class="hangman-part head" id="head" cx="140" cy="60" r="20" style="display: none;" />
                        <line class="hangman-part body" id="body" x1="140" y1="80" x2="140" y2="130" style="display: none;" />
                        <line class="hangman-part arms" id="leftArm" x1="140" y1="90" x2="110" y2="110" style="display: none;" />
                        <line class="hangman-part arms" id="rightArm" x1="140" y1="90" x2="170" y2="110" style="display: none;" />
                        <line class="hangman-part legs" id="leftLeg" x1="140" y1="130" x2="120" y2="160" style="display: none;" />
                        <line class="hangman-part legs" id="rightLeg" x1="140" y1="130" x2="160" y2="160" style="display: none;" />
                    </svg>
                </div>

                <div class="keyboard" id="keyboard"></div>

                <div id="gameMessage" style="text-align: center; font-weight: bold; margin: 10px 0; min-height: 24px;"></div>
                
                <div id="revealedWord" style="display: none; text-align: center; color: var(--secondary); font-size: 1.5rem; margin: 15px 0; font-weight: bold; font-family: var(--font-display);"></div>

                <div class="victory-screen glass-panel" id="victoryScreen" style="display: none; margin-top: 20px; border: 1px solid var(--success);">
                    <h3 style="color: var(--success); border: none;">QUEM ACERTOU?</h3>
                    <input type="text" class="form-input" id="winnerInput" placeholder="Nome do Viewer..." style="text-align: center; margin-bottom: 15px;">
                    <div style="display: flex; gap: 10px;">
                        <button class="btn-small primary" id="addPointBtn" style="flex: 1;">REGISTRAR PONTO</button>
                        <button class="btn-small" id="skipBtn">PULAR</button>
                    </div>
                </div>

                <div class="controls" style="margin-top: 20px; width: 100%;">
                    <button class="btn-small" id="newWordBtn" style="width: 100%; background: rgba(255,255,255,0.05);">‚ùå CANCELAR PARTIDA</button>
                </div>
            </div>
        </div>

        <div class="side-container glass-panel scoreboard-container">
            <h3>üèÜ RANKING</h3>
            <div class="scoreboard" id="scoreboardContent">
                <div style="text-align: center; padding: 40px 0; color: var(--text-dim);">
                    <div style="font-size: 2rem; opacity: 0.5; margin-bottom: 10px;">üìä</div>
                    Sem pontua√ß√µes ainda
                </div>
            </div>
            <button class="btn-small" id="clearScoreboardBtn" style="margin-top: 15px; width: 100%; color: var(--secondary);">üóëÔ∏è LIMPAR DADOS</button>
        </div>
    </div>

    <script>
        // Simple synth for sound effects
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playTone(freq, type, duration) {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        const sounds = {
            click: () => playTone(800, 'sine', 0.1),
            correct: () => { playTone(600, 'sine', 0.1); setTimeout(() => playTone(1200, 'sine', 0.2), 100); },
            wrong: () => { playTone(200, 'sawtooth', 0.3); setTimeout(() => playTone(150, 'sawtooth', 0.3), 150); },
            win: () => { 
                [523, 659, 783, 1046].forEach((f, i) => setTimeout(() => playTone(f, 'square', 0.2), i * 150));
            },
            lose: () => {
                [400, 300, 200, 100].forEach((f, i) => setTimeout(() => playTone(f, 'sawtooth', 0.4), i * 200));
            }
        };
    </script>

    <script>
        // --- GAME LOGIC (PRESERVED & OPTIMIZED) ---
        let secretWord = '';
        let guessedLetters = [];
        let errorCount = 0;
        const maxErrors = 6;
        let scoreboard = [];
        let streamerName = '';
        let currentTheme = '';

        // DOM Cache
        const els = {
            welcomeScreen: document.getElementById('welcomeScreen'),
            mainContainer: document.getElementById('mainContainer'),
            gameContainer: document.getElementById('gameContainer'),
            streamerInput: document.getElementById('streamerNameInput'),
            startBtn: document.getElementById('startGameBtn'),
            setupScreen: document.getElementById('setupScreen'),
            gameScreen: document.getElementById('gameScreen'),
            themeInput: document.getElementById('themeInput'),
            wordInput: document.getElementById('secretWordInput'),
            startRoundBtn: document.getElementById('startRoundBtn'),
            themeDisplay: document.getElementById('themeDisplay'),
            wordDisplay: document.getElementById('wordDisplay'),
            correctCount: document.getElementById('correctCount'),
            errorCount: document.getElementById('errorCount'),
            remainingCount: document.getElementById('remainingCount'),
            keyboard: document.getElementById('keyboard'),
            gameMessage: document.getElementById('gameMessage'),
            revealedWord: document.getElementById('revealedWord'),
            victoryScreen: document.getElementById('victoryScreen'),
            winnerInput: document.getElementById('winnerInput'),
            addPointBtn: document.getElementById('addPointBtn'),
            skipBtn: document.getElementById('skipBtn'),
            newWordBtn: document.getElementById('newWordBtn'),
            scoreboardContent: document.getElementById('scoreboardContent'),
            clearScoreboardBtn: document.getElementById('clearScoreboardBtn'),
            victoryOverlay: document.getElementById('victoryOverlay'),
            victoryMessage: document.getElementById('victoryMessage'),
            continueBtn: document.getElementById('continueBtn'),
            defeatOverlay: document.getElementById('defeatOverlay'),
            defeatMessage: document.getElementById('defeatMessage'),
            continueDefeatBtn: document.getElementById('continueDefeatBtn'),
            rodrigoOverlay: document.getElementById('rodrigoOverlay'),
            closeRodrigoBtn: document.getElementById('closeRodrigoBtn')
        };

        const hangmanParts = [
            document.getElementById('head'),
            document.getElementById('body'),
            document.getElementById('leftArm'),
            document.getElementById('rightArm'),
            document.getElementById('leftLeg'),
            document.getElementById('rightLeg')
        ];

        // Event Listeners
        els.startBtn.addEventListener('click', startGame);
        els.startRoundBtn.addEventListener('click', startRound);
        els.addPointBtn.addEventListener('click', () => addPoint(false));
        els.skipBtn.addEventListener('click', skipVictoryScreen);
        els.newWordBtn.addEventListener('click', resetRound);
        els.clearScoreboardBtn.addEventListener('click', clearScoreboard);
        
        els.continueBtn.addEventListener('click', () => {
            els.victoryOverlay.classList.remove('active');
            els.victoryScreen.style.display = 'block';
            els.winnerInput.focus();
        });
        
        els.continueDefeatBtn.addEventListener('click', () => {
            els.defeatOverlay.classList.remove('active');
            addPoint(true, true);
        });
        
        els.closeRodrigoBtn.addEventListener('click', () => {
            els.rodrigoOverlay.classList.remove('active');
        });

        // Cookie Logic
        function loadFromCookies() {
            const cookies = document.cookie.split(';');
            for (const cookie of cookies) {
                const [name, value] = cookie.trim().split('=');
                if (name === 'jaiminho_scoreboard_v2') {
                    try { scoreboard = JSON.parse(decodeURIComponent(value)); } catch (e) {}
                } else if (name === 'jaiminho_streamer') {
                    streamerName = decodeURIComponent(value);
                    els.streamerInput.value = streamerName;
                    if (streamerName) startGame();
                }
            }
            if (scoreboard.length > 0) updateScoreboard();
        }

        function saveToCookies() {
            const expiryDate = new Date();
            expiryDate.setDate(expiryDate.getDate() + 30);
            document.cookie = `jaiminho_scoreboard_v2=${encodeURIComponent(JSON.stringify(scoreboard))}; expires=${expiryDate.toUTCString()}; path=/`;
            if (streamerName) {
                document.cookie = `jaiminho_streamer=${encodeURIComponent(streamerName)}; expires=${expiryDate.toUTCString()}; path=/`;
            }
        }

        // Keyboard Logic
        function initializeKeyboard() {
            els.keyboard.innerHTML = '';
            const rows = [
                ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],
                ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],
                ['Z', 'X', 'C', 'V', 'B', 'N', 'M']
            ];
            
            rows.forEach(rowKeys => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'keyboard-row';
                rowKeys.forEach(letter => {
                    const key = document.createElement('div');
                    key.className = 'key';
                    key.textContent = letter;
                    key.addEventListener('click', () => {
                        handleGuess(letter);
                        sounds.click();
                    });
                    rowDiv.appendChild(key);
                });
                els.keyboard.appendChild(rowDiv);
            });
        }

        function startGame() {
            const name = els.streamerInput.value.trim();
            if (!name && !streamerName) return alert('Digite seu nome!');
            
            if (name.toLowerCase().includes('rodrigo')) {
                els.rodrigoOverlay.classList.add('active');
            }
            
            if (name) streamerName = name;
            
            els.welcomeScreen.style.display = 'none';
            els.mainContainer.classList.remove('hidden');
            els.mainContainer.classList.add('fade-in');
            initializeKeyboard();
            
            const existingStreamer = scoreboard.find(p => p.isStreamer);
            if (!existingStreamer) {
                scoreboard.push({ name: streamerName, score: 0, isStreamer: true });
            } else if (existingStreamer.name !== streamerName) {
                existingStreamer.name = streamerName;
            }
            
            updateScoreboard();
            saveToCookies();
        }

        function startRound() {
            currentTheme = els.themeInput.value.trim();
            secretWord = els.wordInput.value.trim().toUpperCase();
            
            if (!secretWord || !currentTheme) return alert('Preencha os campos!');
            
            els.wordInput.value = '';
            els.themeInput.value = '';
            guessedLetters = [];
            errorCount = 0;
            
            els.themeDisplay.textContent = currentTheme;
            updateWordDisplay();
            updateStats();
            resetHangman();
            
            els.setupScreen.style.display = 'none';
            els.gameScreen.classList.remove('hidden');
            els.gameScreen.classList.add('fade-in');
            els.victoryScreen.style.display = 'none';
            els.gameMessage.textContent = '';
            els.revealedWord.style.display = 'none';
            
            document.querySelectorAll('.key').forEach(key => {
                key.className = 'key';
            });
        }

        function handleGuess(letter) {
            if (guessedLetters.includes(letter)) return;
            
            guessedLetters.push(letter);
            const keyElements = Array.from(document.querySelectorAll('.key'))
                                .filter(el => el.textContent === letter && !el.classList.contains('disabled'));
            
            const specialChars = [' ', '-', '_'];
            
            if (secretWord.includes(letter) || specialChars.includes(letter)) {
                keyElements.forEach(key => key.classList.add('correct'));
                updateWordDisplay();
                sounds.correct();
                if (checkWin()) showVictoryModal();
            } else {
                keyElements.forEach(key => key.classList.add('wrong'));
                errorCount++;
                updateHangman();
                updateStats();
                sounds.wrong();
                if (errorCount >= maxErrors) gameOver();
            }
            
            keyElements.forEach(key => key.classList.add('disabled'));
        }

        function showVictoryModal() {
            sounds.win();
            els.victoryMessage.textContent = `A palavra era: ${secretWord}`;
            els.victoryOverlay.classList.add('active');
            createConfetti();
        }

        function gameOver() {
            sounds.lose();
            els.defeatMessage.textContent = `A palavra era: ${secretWord}`;
            els.defeatOverlay.classList.add('active');
            els.revealedWord.textContent = `RESPOSTA: ${secretWord}`;
            els.revealedWord.style.display = 'block';
            document.querySelectorAll('.key').forEach(key => key.classList.add('disabled'));
        }

        function updateWordDisplay() {
            const display = secretWord.split('').map(letter => {
                if ([' ', '-', '_'].includes(letter) || guessedLetters.includes(letter)) return letter;
                return '_';
            }).join(' ');
            
            els.wordDisplay.textContent = display;
            const remaining = secretWord.split('').filter(l => ![' ', '-', '_', ...guessedLetters].includes(l)).length;
            els.remainingCount.textContent = remaining;
        }

        function updateStats() {
            const correct = secretWord.split('').filter(l => ![' ', '-', '_'].includes(l) && guessedLetters.includes(l)).length;
            els.correctCount.textContent = correct;
            els.errorCount.textContent = `${errorCount}/${maxErrors}`;
        }

        function updateHangman() {
            if (errorCount > 0 && errorCount <= hangmanParts.length) {
                const part = hangmanParts[errorCount - 1];
                part.style.display = 'block';
                part.style.animation = 'none';
                void part.offsetWidth;
                part.style.animation = 'drawPart 1s ease forwards';
            }
        }

        function resetHangman() {
            hangmanParts.forEach(part => part.style.display = 'none');
        }

        function checkWin() {
            return secretWord.split('').every(l => [' ', '-', '_'].includes(l) || guessedLetters.includes(l));
        }

        function createConfetti() {
            for(let i=0; i<60; i++) {
                const conf = document.createElement('div');
                conf.style.cssText = `
                    position: fixed; width: 10px; height: 10px; background: ${['#00f2ff','#ff0055','#7000ff'][Math.floor(Math.random()*3)]};
                    top: -10px; left: ${Math.random()*100}vw; opacity: 1; z-index: 2000;
                    transition: top ${2+Math.random()*3}s linear, transform 3s ease;
                `;
                document.body.appendChild(conf);
                setTimeout(() => {
                    conf.style.top = '110vh';
                    conf.style.transform = `rotate(${Math.random()*360}deg)`;
                }, 100);
                setTimeout(() => conf.remove(), 5000);
            }
        }

        function addPoint(isStreamer, isAuto = false) {
            let playerName = isStreamer ? streamerName : els.winnerInput.value.trim();
            if (!playerName && !isAuto) return alert('Nome do ganhador?');
            
            const existing = scoreboard.find(p => p.name === playerName);
            if (existing) existing.score++;
            else scoreboard.push({ name: playerName, score: 1, isStreamer });
            
            updateScoreboard();
            saveToCookies();
            
            if (!isAuto) resetRound();
            else els.gameMessage.textContent = `Ponto autom√°tico para ${playerName}`;
        }

        function skipVictoryScreen() {
            els.victoryScreen.style.display = 'none';
            resetRound();
        }

        function resetRound() {
            els.setupScreen.style.display = 'block';
            els.gameScreen.classList.add('hidden');
            els.victoryScreen.style.display = 'none';
            els.revealedWord.style.display = 'none';
        }

        function updateScoreboard() {
            scoreboard.sort((a, b) => b.score - a.score);
            els.scoreboardContent.innerHTML = scoreboard.length ? '' : '<div style="text-align: center; padding: 20px; color: var(--text-dim);">Vazio</div>';
            
            scoreboard.forEach((player, index) => {
                const div = document.createElement('div');
                div.className = `score-item ${player.isStreamer ? 'streamer' : ''}`;
                div.innerHTML = `
                    <div style="display:flex; align-items:center; gap:8px; font-weight:600;">
                        ${index === 0 ? 'üëë' : index + 1 + '.'} ${player.name}
                    </div>
                    <div class="player-score">${player.score}</div>
                `;
                els.scoreboardContent.appendChild(div);
            });
        }

        function clearScoreboard() {
            if (!confirm('Apagar tudo?')) return;
            scoreboard = [{ name: streamerName, score: 0, isStreamer: true }];
            updateScoreboard();
            saveToCookies();
        }

        window.addEventListener('load', loadFromCookies);

        document.addEventListener('keydown', (e) => {
            if (els.gameScreen.classList.contains('hidden')) return;
            const key = e.key.toUpperCase();
            if (/^[A-Z]$/.test(key)) handleGuess(key);
        });
    </script>
</body>
</html>