<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo do Jaiminho - Live Streamer</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%); 
            color: white; 
            min-height: 100vh; 
            padding: 20px;
        }

        /* Container principal */
        .main-container {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }

        /* Container do jogo */
        .game-container { 
            background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(10px); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 20px; 
            padding: 30px; 
            width: 60%; 
            text-align: center; 
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.3); 
        }

        /* Container de histórico */
        .history-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            width: 20%;
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.3);
        }

        /* Container do placar */
        .scoreboard-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            width: 20%;
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.3);
        }

        /* Título do jogo */
        h1 { 
            font-size: 2.5rem; 
            margin-bottom: 30px; 
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px rgba(255, 107, 107, 0.3);
        }

        /* Telas do jogo */
        .setup-screen { display: block; }
        .game-screen { display: none; }
        .welcome-screen { text-align: center; }

        /* Inputs */
        .secret-input, .streamer-name-input { 
            background: rgba(255, 255, 255, 0.1); 
            border: 2px solid rgba(255, 255, 255, 0.2); 
            border-radius: 15px; 
            padding: 15px 20px; 
            font-size: 1.2rem; 
            color: white; 
            width: 100%; 
            max-width: 300px; 
            margin-bottom: 20px; 
            text-align: center; 
            transition: 0.3s; 
        }

        .secret-input:focus, .streamer-name-input:focus { 
            outline: none; 
            border-color: #4ecdc4; 
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3); 
        }

        .secret-input::placeholder, .streamer-name-input::placeholder { 
            color: rgba(255, 255, 255, 0.5); 
        }

        /* Botões */
        .btn { 
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4); 
            border: none; 
            border-radius: 15px; 
            padding: 15px 30px; 
            font-size: 1.1rem; 
            color: white; 
            cursor: pointer; 
            transition: 0.3s; 
            font-weight: bold; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            margin: 5px;
        }

        .btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3); 
        }

        .btn-small { 
            background: linear-gradient(45deg, #4ecdc4, #45b7d1); 
            border: none; 
            border-radius: 8px; 
            padding: 8px 15px; 
            font-size: 0.9rem; 
            color: white; 
            cursor: pointer; 
            transition: 0.3s; 
            margin: 5px;
        }

        .btn-small:hover { 
            transform: translateY(-1px); 
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.3); 
        }

        /* Display da palavra */
        .word-display { 
            font-size: 2.5rem; 
            font-weight: bold; 
            margin: 30px 0; 
            letter-spacing: 8px; 
            color: #4ecdc4; 
            text-shadow: 0 0 20px rgba(78, 205, 196, 0.5); 
            min-height: 60px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            flex-wrap: wrap; 
            gap: 5px; 
        }

        /* Estatísticas */
        .stats { 
            display: flex; 
            justify-content: space-around; 
            margin: 20px 0; 
            flex-wrap: wrap; 
            gap: 20px; 
        }

        .stat-item { 
            background: rgba(255, 255, 255, 0.1); 
            padding: 15px 25px; 
            border-radius: 15px; 
            border: 1px solid rgba(255, 255, 255, 0.2); 
            flex: 1 1 0; 
            min-width: 120px; 
        }

        .stat-label { 
            font-size: 0.9rem; 
            opacity: 0.8; 
            margin-bottom: 5px; 
        }

        .stat-value { 
            font-size: 1.5rem; 
            font-weight: bold; 
        }

        .errors { color: #ff6b6b; }

        /* Teclado */
        .keyboard { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(50px, 1fr)); 
            gap: 10px; 
            margin: 30px auto; 
            max-width: 500px; 
        }

        .key { 
            background: rgba(255, 255, 255, 0.1); 
            border: 2px solid rgba(255, 255, 255, 0.2); 
            border-radius: 10px; 
            padding: 15px; 
            font-size: 1.1rem; 
            color: white; 
            cursor: pointer; 
            transition: 0.3s; 
            font-weight: bold; 
        }

        .key:hover { 
            background: rgba(255, 255, 255, 0.2); 
            transform: translateY(-2px); 
        }

        .key.correct { 
            background: linear-gradient(45deg, #4ecdc4, #45b7d1); 
            border-color: #4ecdc4; 
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3); 
        }

        .key.wrong { 
            background: linear-gradient(45deg, #ff6b6b, #ff4757); 
            border-color: #ff6b6b; 
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3); 
        }

        .key.disabled { 
            opacity: 0.3; 
            cursor: not-allowed; 
            pointer-events: none; 
        }

        /* Mensagens */
        .message { 
            font-size: 1.5rem; 
            font-weight: bold; 
            margin: 20px 0; 
            padding: 20px; 
            border-radius: 15px; 
            min-height: 60px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            transition: all 0.3s ease;
        }

        .message.victory { 
            background: linear-gradient(45deg, rgba(78, 205, 196, 0.2), rgba(69, 183, 209, 0.2)); 
            border: 2px solid #4ecdc4; 
            color: #4ecdc4; 
            text-shadow: 0 0 20px rgba(78, 205, 196, 0.5); 
        }

        .message.defeat { 
            background: linear-gradient(45deg, rgba(255, 107, 107, 0.2), rgba(255, 71, 87, 0.2)); 
            border: 2px solid #ff6b6b; 
            color: #ff6b6b; 
            text-shadow: 0 0 20px rgba(255, 107, 107, 0.5); 
        }

        /* Palavra revelada */
        .revealed-word {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b6b;
            margin: 15px 0;
            text-transform: uppercase;
            letter-spacing: 3px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Tela de vitória */
        .victory-screen { 
            display: none; 
            background: rgba(78, 205, 196, 0.1); 
            border: 2px solid #4ecdc4; 
            border-radius: 15px; 
            padding: 20px; 
            margin: 20px 0; 
        }

        .victory-input { 
            background: rgba(255, 255, 255, 0.1); 
            border: 2px solid #4ecdc4; 
            border-radius: 10px; 
            padding: 12px 15px; 
            font-size: 1.1rem; 
            color: white; 
            margin: 10px 5px; 
            text-align: center; 
            min-width: 200px; 
        }

        .victory-input:focus { 
            outline: none; 
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.4); 
        }

        .victory-input::placeholder { 
            color: rgba(255, 255, 255, 0.6); 
        }

        /* Placar */
        .scoreboard { 
            margin: 20px 0; 
            max-height: 500px; 
            overflow-y: auto; 
        }

        .scoreboard h3 { 
            color: #4ecdc4; 
            margin-bottom: 15px; 
            font-size: 1.3rem; 
            text-align: center; 
        }

        .score-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 10px 15px; 
            margin: 5px 0; 
            background: rgba(255, 255, 255, 0.05); 
            border-radius: 8px; 
            border-left: 3px solid #4ecdc4; 
        }

        .score-item.streamer { 
            border-left-color: #ff6b6b; 
            background: rgba(255, 107, 107, 0.1); 
        }

        .player-name { 
            font-weight: bold; 
            font-size: 1.1rem; 
        }

        .player-score { 
            font-size: 1.2rem; 
            font-weight: bold; 
            color: #4ecdc4; 
        }

        .streamer .player-score { 
            color: #ff6b6b; 
        }

        .crown { 
            color: #ffd700; 
            margin-right: 5px; 
        }

        /* Hangman */
        .hangman-display { 
            background: rgba(0, 0, 0, 0.3); 
            border-radius: 15px; 
            padding: 20px; 
            margin: 20px 0; 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            height: 250px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }

        .hangman-svg { 
            width: 200px; 
            height: 200px; 
        }

        .hangman-part { 
            transition: 0.5s; 
            filter: drop-shadow(0 0 5px rgba(255, 107, 107, 0.5)); 
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: draw 1.5s ease-in-out forwards;
        }

        @keyframes draw {
            to {
                stroke-dashoffset: 0;
            }
        }

        .gallows { 
            stroke: #666; 
            stroke-width: 3; 
            fill: none; 
        }

        .head { 
            stroke: #ff6b6b; 
            stroke-width: 3; 
            fill: none; 
        }

        .body { 
            stroke: #ff6b6b; 
            stroke-width: 3; 
        }

        .arms, .legs { 
            stroke: #ff6b6b; 
            stroke-width: 3; 
        }

        /* Histórico de versões */
        .history-title {
            color: #4ecdc4;
            margin-bottom: 15px;
            font-size: 1.3rem;
            text-align: center;
        }

        .history-content {
            margin: 20px 0;
            max-height: 500px;
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .version-title {
            color: #ff6b6b;
            margin: 15px 0 5px;
            font-weight: bold;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 5px;
        }

        .version-feature {
            margin: 8px 0;
            padding-left: 15px;
            position: relative;
        }

        .version-feature:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #4ecdc4;
        }

        .feature-check {
            color: #4ecdc4;
            margin-right: 5px;
        }

        /* Como usar */
        .how-to-use {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 3px solid #ff6b6b;
        }

        .how-to-use h4 {
            color: #ff6b6b;
            margin-bottom: 10px;
        }

        .how-to-use ol {
            padding-left: 20px;
        }

        .how-to-use li {
            margin-bottom: 8px;
        }

        /* Responsividade */
        @media (max-width: 1024px) {
            .main-container { 
                flex-direction: column; 
            }
            
            .game-container, .history-container, .scoreboard-container { 
                width: 100%; 
            }
            
            .game-container { 
                padding: 20px; 
            }
            
            h1 { 
                font-size: 2rem; 
            }
            
            .word-display { 
                font-size: 2rem; 
                letter-spacing: 4px; 
            }
            
            .keyboard { 
                grid-template-columns: repeat(auto-fit, minmax(40px, 1fr)); 
                gap: 8px; 
            }
            
            .key { 
                padding: 12px 8px; 
                font-size: 1rem; 
            }
        }
    </style>
</head>
<body>
    <!-- Tela de Boas-Vindas -->
    <div class="welcome-screen" id="welcomeScreen">
        <h1>🎮 JOGO DO JAIMINHO</h1>
        <div class="input-section">
            <input type="text" class="streamer-name-input" id="streamerNameInput" placeholder="Digite seu nome de streamer..." maxlength="20">
            <br>
            <button class="btn" id="startGameBtn">INICIAR</button>
        </div>
    </div>

    <!-- Container Principal (aparece após cadastro do nome) -->
    <div class="main-container" id="mainContainer" style="display: none;">
        <!-- Histórico na esquerda -->
        <div class="history-container">
            <h3 class="history-title">📜 HISTÓRICO DE VERSÕES</h3>
            <div class="history-content">
                <div class="version-title">Versão 1.2.1 (Atual)</div>
                <div class="version-feature"><span class="feature-check">✅</span> Mensagem de erro permanece até clicar em "NOVA PALAVRA"</div>
                <div class="version-feature"><span class="feature-check">✅</span> Exibição melhorada da palavra secreta</div>
                
                <div class="version-title">Versão 1.2</div>
                <div class="version-feature"><span class="feature-check">✅</span> Histórico de versões na lateral</div>
                <div class="version-feature"><span class="feature-check">✅</span> Sistema de cookies para salvar dados</div>
                <div class="version-feature"><span class="feature-check">✅</span> Animação do boneco melhorada</div>
                
                <div class="version-title">Versão 1.1</div>
                <div class="version-feature"><span class="feature-check">✅</span> Tela de boas-vindas com nome do streamer</div>
                <div class="version-feature"><span class="feature-check">✅</span> Placar sempre visível</div>
                <div class="version-feature"><span class="feature-check">✅</span> Pontuação automática para o streamer</div>
                <div class="version-feature"><span class="feature-check">✅</span> Validação da palavra secreta</div>
                <div class="version-feature"><span class="feature-check">✅</span> Layout reorganizado</div>
                
                <div class="version-title">Versão 1.0 (Original)</div>
                <div class="version-feature">Tela inicial básica</div>
                <div class="version-feature">Placar em popup</div>
                <div class="version-feature">Sem identificação do streamer</div>
                <div class="version-feature">Pontuação manual</div>

                <div class="how-to-use">
                    <h4>🎮 COMO USAR</h4>
                    <ol>
                        <li>Digite seu nome de streamer e clique em "INICIAR"</li>
                        <li>Na tela do jogo, digite a palavra secreta</li>
                        <li>Clique em "INICIAR JOGO"</li>
                        <li>Jogadores tentam adivinhar a palavra letra por letra</li>
                        <li>Se errarem 6 vezes: ponto automático para o streamer</li>
                        <li>Se acertarem: registre quem acertou na tela de vitória</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Jogo no centro -->
        <div class="game-container">
            <!-- Tela de Configuração -->
            <div class="setup-screen" id="setupScreen">
                <div class="input-section">
                    <input type="password" class="secret-input" id="secretWordInput" placeholder="Digite a palavra secreta..." maxlength="30">
                    <br>
                    <button class="btn" id="startRoundBtn">INICIAR JOGO</button>
                </div>
            </div>

            <!-- Tela do Jogo -->
            <div class="game-screen" id="gameScreen">
                <div class="word-display" id="wordDisplay"></div>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">Acertos</div>
                        <div class="stat-value" id="correctCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label errors">Erros</div>
                        <div class="stat-value errors" id="errorCount">0/6</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Restam</div>
                        <div class="stat-value" id="remainingCount">0</div>
                    </div>
                </div>

                <div class="hangman-display" id="hangmanDisplay">
                    <svg class="hangman-svg" viewBox="0 0 200 200">
                        <!-- Base -->
                        <line class="gallows" x1="20" y1="180" x2="100" y2="180" />
                        <!-- Poste -->
                        <line class="gallows" x1="60" y1="180" x2="60" y2="20" />
                        <!-- Topo -->
                        <line class="gallows" x1="60" y1="20" x2="140" y2="20" />
                        <!-- Corda -->
                        <line class="gallows" x1="140" y1="20" x2="140" y2="40" />
                        
                        <!-- Cabeça (inicialmente invisível) -->
                        <circle class="hangman-part head" id="head" cx="140" cy="60" r="20" style="display: none;" />
                        <!-- Corpo (inicialmente invisível) -->
                        <line class="hangman-part body" id="body" x1="140" y1="80" x2="140" y2="130" style="display: none;" />
                        <!-- Braço esquerdo (inicialmente invisível) -->
                        <line class="hangman-part arms" id="leftArm" x1="140" y1="90" x2="110" y2="110" style="display: none;" />
                        <!-- Braço direito (inicialmente invisível) -->
                        <line class="hangman-part arms" id="rightArm" x1="140" y1="90" x2="170" y2="110" style="display: none;" />
                        <!-- Perna esquerda (inicialmente invisível) -->
                        <line class="hangman-part legs" id="leftLeg" x1="140" y1="130" x2="120" y2="160" style="display: none;" />
                        <!-- Perna direita (inicialmente invisível) -->
                        <line class="hangman-part legs" id="rightLeg" x1="140" y1="130" x2="160" y2="160" style="display: none;" />
                    </svg>
                </div>

                <div class="keyboard" id="keyboard"></div>

                <div class="message" id="gameMessage"></div>
                <div class="revealed-word" id="revealedWord" style="display: none;"></div>

                <div class="victory-screen" id="victoryScreen">
                    <h3>🎉 VITÓRIA! 🎉</h3>
                    <p>Quem acertou a palavra?</p>
                    <input type="text" class="victory-input" id="winnerInput" placeholder="Nome do ganhador..." maxlength="20">
                    <br>
                    <button class="btn-small" id="addPointBtn">ADICIONAR PONTO</button>
                    <button class="btn-small" id="streamerPointBtn">FUI EU (STREAMER)</button>
                    <button class="btn-small" id="skipBtn">PULAR</button>
                </div>

                <div class="controls">
                    <button class="btn" id="newWordBtn">NOVA PALAVRA</button>
                </div>
            </div>
        </div>

        <!-- Placar ao lado -->
        <div class="scoreboard-container">
            <h3>🏆 PLACAR</h3>
            <div class="scoreboard">
                <div id="scoreboardContent">
                    <p style="opacity: 0.6; text-align: center;">Nenhum ponto registrado ainda</p>
                </div>
            </div>
            <div style="margin-top: 20px; text-align: center;">
                <button class="btn-small" id="clearScoreboardBtn">LIMPAR PLACAR</button>
            </div>
        </div>
    </div>

    <script>
        // Variáveis do jogo
        let secretWord = '';
        let guessedLetters = [];
        let errorCount = 0;
        const maxErrors = 6;
        let scoreboard = [];
        let streamerName = '';

        // Elementos do DOM
        const welcomeScreen = document.getElementById('welcomeScreen');
        const mainContainer = document.getElementById('mainContainer');
        const streamerNameInput = document.getElementById('streamerNameInput');
        const startGameBtn = document.getElementById('startGameBtn');
        
        const setupScreen = document.getElementById('setupScreen');
        const gameScreen = document.getElementById('gameScreen');
        const secretWordInput = document.getElementById('secretWordInput');
        const startRoundBtn = document.getElementById('startRoundBtn');
        const wordDisplay = document.getElementById('wordDisplay');
        const correctCountElement = document.getElementById('correctCount');
        const errorCountElement = document.getElementById('errorCount');
        const remainingCountElement = document.getElementById('remainingCount');
        const keyboard = document.getElementById('keyboard');
        const gameMessage = document.getElementById('gameMessage');
        const revealedWord = document.getElementById('revealedWord');
        const victoryScreen = document.getElementById('victoryScreen');
        const winnerInput = document.getElementById('winnerInput');
        const addPointBtn = document.getElementById('addPointBtn');
        const streamerPointBtn = document.getElementById('streamerPointBtn');
        const skipBtn = document.getElementById('skipBtn');
        const newWordBtn = document.getElementById('newWordBtn');
        const scoreboardContent = document.getElementById('scoreboardContent');
        const clearScoreboardBtn = document.getElementById('clearScoreboardBtn');
        
        // Partes do boneco do hangman
        const hangmanParts = [
            document.getElementById('head'),
            document.getElementById('body'),
            document.getElementById('leftArm'),
            document.getElementById('rightArm'),
            document.getElementById('leftLeg'),
            document.getElementById('rightLeg')
        ];

        // Event Listeners
        startGameBtn.addEventListener('click', startGame);
        startRoundBtn.addEventListener('click', startRound);
        addPointBtn.addEventListener('click', () => addPoint(false));
        streamerPointBtn.addEventListener('click', () => addPoint(true));
        skipBtn.addEventListener('click', skipVictoryScreen);
        newWordBtn.addEventListener('click', resetRound);
        clearScoreboardBtn.addEventListener('click', clearScoreboard);

        // Carrega dados salvos nos cookies
        function loadFromCookies() {
            const cookies = document.cookie.split(';');
            for (const cookie of cookies) {
                const [name, value] = cookie.trim().split('=');
                if (name === 'jaiminho_scoreboard') {
                    try {
                        scoreboard = JSON.parse(decodeURIComponent(value));
                    } catch (e) {
                        console.error('Erro ao carregar placar:', e);
                    }
                } else if (name === 'jaiminho_streamer') {
                    streamerName = decodeURIComponent(value);
                    streamerNameInput.value = streamerName;
                }
            }
            
            if (scoreboard.length > 0) {
                updateScoreboard();
            }
        }

        // Salva dados nos cookies
        function saveToCookies() {
            // Salva por 30 dias
            const expiryDate = new Date();
            expiryDate.setDate(expiryDate.getDate() + 30);
            
            // Salva o placar
            document.cookie = `jaiminho_scoreboard=${encodeURIComponent(JSON.stringify(scoreboard))}; expires=${expiryDate.toUTCString()}; path=/`;
            
            // Salva o nome do streamer
            if (streamerName) {
                document.cookie = `jaiminho_streamer=${encodeURIComponent(streamerName)}; expires=${expiryDate.toUTCString()}; path=/`;
            }
        }

        // Inicializa o teclado
        function initializeKeyboard() {
            keyboard.innerHTML = '';
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
            
            letters.forEach(letter => {
                const key = document.createElement('div');
                key.className = 'key';
                key.textContent = letter;
                key.addEventListener('click', () => handleGuess(letter));
                keyboard.appendChild(key);
            });
        }

        // Começa o jogo após cadastro do nome
        function startGame() {
            const name = streamerNameInput.value.trim();
            if (name === '') {
                alert('Por favor, digite seu nome de streamer!');
                return;
            }
            
            streamerName = name;
            welcomeScreen.style.display = 'none';
            mainContainer.style.display = 'flex';
            initializeKeyboard();
            
            // Verifica se o streamer já está no placar
            const existingStreamer = scoreboard.find(player => player.isStreamer);
            
            if (!existingStreamer) {
                // Adiciona o streamer ao placar com 0 pontos
                scoreboard.push({
                    name: streamerName,
                    score: 0,
                    isStreamer: true
                });
            } else if (existingStreamer.name !== streamerName) {
                // Atualiza o nome do streamer se mudou
                existingStreamer.name = streamerName;
            }
            
            updateScoreboard();
            saveToCookies();
        }

        // Inicia uma nova rodada
        function startRound() {
            secretWord = secretWordInput.value.trim().toUpperCase();
            
            if (secretWord === '') {
                alert('Por favor, digite uma palavra secreta!');
                return;
            }
            
            // Verifica se a palavra contém apenas letras
            if (!/^[A-ZÀ-Ú]+$/i.test(secretWord)) {
                alert('A palavra secreta deve conter apenas letras!');
                return;
            }
            
            secretWordInput.value = '';
            guessedLetters = [];
            errorCount = 0;
            
            updateWordDisplay();
            updateStats();
            resetHangman();
            
            setupScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            victoryScreen.style.display = 'none';
            gameMessage.className = 'message';
            gameMessage.textContent = '';
            revealedWord.style.display = 'none';
            
            // Ativa todas as teclas
            document.querySelectorAll('.key').forEach(key => {
                key.className = 'key';
            });
        }

        // Lida com um palpite de letra
        function handleGuess(letter) {
            if (guessedLetters.includes(letter)) return;
            
            guessedLetters.push(letter);
            const keyElement = Array.from(document.querySelectorAll('.key'))
                                .find(el => el.textContent === letter);
            
            if (secretWord.includes(letter)) {
                // Acerto
                keyElement.classList.add('correct');
                updateWordDisplay();
                
                // Verifica se ganhou
                if (checkWin()) {
                    showVictoryScreen();
                }
            } else {
                // Erro
                keyElement.classList.add('wrong');
                errorCount++;
                updateHangman();
                updateStats();
                
                // Verifica se perdeu
                if (errorCount >= maxErrors) {
                    gameOver();
                }
            }
            
            keyElement.classList.add('disabled');
        }

        // Atualiza a exibição da palavra
        function updateWordDisplay() {
            const display = secretWord.split('').map(letter => 
                guessedLetters.includes(letter) ? letter : '_'
            ).join(' ');
            
            wordDisplay.textContent = display;
            
            // Atualiza contagem de letras restantes
            const remaining = secretWord.split('').filter(letter => 
                !guessedLetters.includes(letter)
            ).length;
            
            remainingCountElement.textContent = remaining;
        }

        // Atualiza as estatísticas
        function updateStats() {
            const correct = secretWord.split('').filter(letter => 
                guessedLetters.includes(letter)
            ).length;
            
            correctCountElement.textContent = correct;
            errorCountElement.textContent = `${errorCount}/${maxErrors}`;
        }

        // Atualiza o boneco do hangman
        function updateHangman() {
            if (errorCount > 0 && errorCount <= hangmanParts.length) {
                const part = hangmanParts[errorCount - 1];
                part.style.display = 'block';
                
                // Reinicia a animação
                part.style.animation = 'none';
                void part.offsetWidth; // Trigger reflow
                part.style.animation = 'draw 1.5s ease-in-out forwards';
            }
        }

        // Reseta o boneco do hangman
        function resetHangman() {
            hangmanParts.forEach(part => {
                part.style.display = 'none';
            });
        }

        // Verifica se o jogador ganhou
        function checkWin() {
            return secretWord.split('').every(letter => 
                guessedLetters.includes(letter)
            );
        }

        // Mostra a tela de vitória
        function showVictoryScreen() {
            victoryScreen.style.display = 'block';
            gameMessage.className = 'message victory';
            gameMessage.textContent = `A palavra era: ${secretWord}`;
            revealedWord.style.display = 'none';
        }

        // Game over - streamer perdeu
        function gameOver() {
            gameMessage.className = 'message defeat';
            gameMessage.textContent = `Game Over!`;
            
            // Mostra a palavra secreta de forma destacada
            revealedWord.textContent = `A palavra era: ${secretWord}`;
            revealedWord.style.display = 'block';
            
            // Desabilita o teclado
            document.querySelectorAll('.key').forEach(key => {
                key.classList.add('disabled');
            });
            
            // Adiciona ponto automaticamente para o streamer
            setTimeout(() => {
                addPoint(true, true);
            }, 1000);
        }

        // Adiciona ponto ao placar
        function addPoint(isStreamer, isAuto = false) {
            let playerName;
            
            if (isStreamer) {
                playerName = streamerName;
            } else {
                playerName = winnerInput.value.trim();
                if (playerName === '' && !isAuto) {
                    alert('Por favor, digite o nome do ganhador!');
                    return;
                }
            }
            
            // Verifica se o jogador já está no placar
            const existingPlayer = scoreboard.find(player => player.name === playerName);
            
            if (existingPlayer) {
                existingPlayer.score++;
            } else {
                scoreboard.push({
                    name: playerName,
                    score: 1,
                    isStreamer: isStreamer
                });
            }
            
            updateScoreboard();
            saveToCookies();
            
            if (!isAuto) {
                resetRound();
            } else {
                // Se foi automático (derrota), mostra mensagem
                gameMessage.textContent += `\nPonto para ${playerName}!`;
            }
        }

        // Pula a tela de vitória
        function skipVictoryScreen() {
            victoryScreen.style.display = 'none';
            resetRound();
        }

        // Reseta a rodada
        function resetRound() {
            setupScreen.style.display = 'block';
            gameScreen.style.display = 'none';
            victoryScreen.style.display = 'none';
            gameMessage.className = 'message';
            gameMessage.textContent = '';
            revealedWord.style.display = 'none';
        }

        // Atualiza o placar
        function updateScoreboard() {
            if (scoreboard.length === 0) {
                scoreboardContent.innerHTML = '<p style="opacity: 0.6; text-align: center;">Nenhum ponto registrado ainda</p>';
                return;
            }
            
            // Ordena por pontuação (maior primeiro)
            scoreboard.sort((a, b) => b.score - a.score);
            
            let html = '';
            scoreboard.forEach((player, index) => {
                const isTop = index === 0 && scoreboard.length > 1 && player.score > 0;
                html += `
                    <div class="score-item ${player.isStreamer ? 'streamer' : ''}">
                        <div class="player-name">
                            ${isTop ? '👑' : ''} ${player.name}
                        </div>
                        <div class="player-score">
                            ${player.score} ${player.score === 1 ? 'ponto' : 'pontos'}
                        </div>
                    </div>
                `;
            });
            
            scoreboardContent.innerHTML = html;
        }

        // Limpa o placar
        function clearScoreboard() {
            if (confirm('Tem certeza que deseja limpar o placar?')) {
                scoreboard = [];
                // Mantém apenas o streamer no placar
                scoreboard.push({
                    name: streamerName,
                    score: 0,
                    isStreamer: true
                });
                updateScoreboard();
                saveToCookies();
            }
        }

        // Carrega os dados quando a página é aberta
        window.addEventListener('load', loadFromCookies);
    </script>
</body>
</html>